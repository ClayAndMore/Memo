### 关系型数据库原理

```
                磁盘                        |   内存
  4k                   4k                   |
+---------------+      +-----------------+  | +----------+
|     datapage  |      |    index        |  | |          |
|               |      |                 |  | | B+ tree  |
|               +<-------+               |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
|               |      |                 |  | |          |
+----------------      +-----------------+  | +----------+                          
```

1. 在磁盘中存数据是按datapage页来存的
2. 所有的页需要被索引管理，但是索引记录也需要4k的page来记录
3. 4k的原因 是i/o交互的最大容量
4. 那谁来找管理和找索引页呢，在内存中有B+tree来管理
5. 两次i/o， 查索引页一次，查datapage一次。

缺点： 当并发时，内存频繁和内存交互，响应缓慢。





### redis 

Memchached

 也是内存数据库，但是支持一种数据类型， 字符串



redis

1. 基于开源的BSD协议，当然基于开源的做出的东西也要开源。
2. 使用c语言编写，非常小，7兆左右
3. **基于内存的持久化**
4. 高性能的key-value 的 nosql数据库

