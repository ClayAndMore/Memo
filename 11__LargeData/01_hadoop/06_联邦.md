
---
title: "06_联邦.md"
date: 2019-09-29 17:53:13 +0800
lastmod: 2019-09-29 17:53:13 +0800
draft: false
tags: [""]
categories: [""]
author: "Claymore"

---
联邦制 Federation

联邦名来源于美国联邦制，每个洲的宪法不一样，每个洲互不干涉。

### 联邦情况

#### 第一种

原公司有500DN + 1 NN, 由一个大数据人员维护。现在你是新来的

公司实力雄厚，给你也配置了一样的环境：

```
+---------------------------------------------------------------+
|       +--------+                          +---------+         |
|       | NN1    |                          |  NN2    |         |
|       +--------+                          +---------+         |
|                                                               |
| +--------------------+          +------------------------+    |
| |   500DN            |     +    |   500DN                |    |
| +--------------------+          +------------------------+    |
|                                                               |
+---------------------------------------------------------------+
```

后来发现你的500DN数据满了，需要扩容，但是另一个500DN还有剩余空间，所以请求向另一个500DN放数据。

现在NN1和NN2就共享这1000DN， 但各自的客户端需要去各自去取，比如客户端c1写入时通过NN1，那么读的时候也要通过NN1, 通过NN2是拿不到数据的。

现在NN1和NN2是联邦的关系。



#### 第二种

如果公司实力一般，也是增加一个nn,或者多个nn并行，各个nn之间不能操作其他人的数据。

```
+--------------------------------+
|   +--------+    +----------+   |
|   | NN1    |    | NN2      |   |
|   +--------+    +----------+   |
|                                |
| +---------------------------+  |
| |     500DD                 |  |
| +---------------------------+  |
+--------------------------------+

```



#### 第三种

```
+-----+   +------+
|  c  |   | c    |
+-----+   +------+

+-------------------------+
|       FS                |  # 该层可对接下方的hadoop 或 FTP, hbase
+-------------------------+

+-------+  +------+
| NN|A  |  | NN|B |
+-------+  +------+

+-------------------------+
|   500DN                 |
+-------------------------+

```

原NN-A存数据内存满了，再增加一个NN-B做联邦，但是多个NN 对 C客户端来说不能互通数据，所以做一层FS, web server 提供一些接口，

联邦 Federation  解决了 扩展问题， 但是没有解决NN的单点问题，还需要做高可用.



它的场景不会太多，企业用的少。