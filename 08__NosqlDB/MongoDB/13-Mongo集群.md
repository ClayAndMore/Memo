
---
title: "13-Mongo集群.md"
date: 2019-09-29 17:53:13 +0800
lastmod: 2020-06-15 09:12:32 +0800
draft: false
tags: [""]
categories: [""]
author: "Claymore"

---

---
title: "13-Mongo集群.md"
date: 2019-09-29 17:53:13 +0800
lastmod: 2019-09-29 17:53:13 +0800
draft: false
tags: [""]
categories: [""]
author: "Claymore"

---
Tags:[nosql, database, mongodb]

### 分片

MongoDB将大型集合分割到服务器（或集群）所用的方法。



目的：

* 集群”不可见”

  打交道的只是一个mongod实例。

  Mongo自带一个mongos 的进程，对连上它的都看作一个普通的mongod服务器。如果请求来时， 会转发到一个（组）正确的服务器， 然后将响应拼装起来。

  客户端并不知道它连接的是个集群

* 稳定性

  当其中一个服务器/进程 坏掉， 其他副本可以继续替它进行工作。

  数据可迁移。

* 易扩展

  支持系统扩容。



#### 分割数据

一个分片可以是一台服务器和多台（称为副本集），当多台时，则**每台服务器都有一份完全相同的数据副本**



#### 分配数据

   为了合理的分配我们可以选择某字段作为**片键** 来分配， 比如用户名开头字母['a', 'f') ，即包含a不包含f,作为第一片的区间。

* 一分片一区间

  如上方名字所用区间可划分四片： `['a', 'f'), ['f', 'n'), ['n', 't'), ['t', '{')`

  {是ASCII码z后的字符

* 一分片多区间

* 


### 建立集群







### 使用集群



