Tags:[python]

### python引包路径

运行Python应用或引用Python模块，Python解释器要有一个查找的过程。

设置一个**环境变量PYTHONPATH为Python增加一个搜索路径**，以方便查找到相关Python模块。

不同的操作系统环境变量的设置：

linux:

`` 默认没有，可以自己定义

windows:

`C:\Users\Administrator>set PYTHONPATH=E:/Project/Python/ModuleAndPackage/`



查看当前搜索路径：

```python
import os
os.path
```



#### pth文件

* pth文件可以永久添加引用包的路径

- 首先xxx.pth文件里面会书写一些路径，一行一个。`eg:/home/lib/python `

- 将xxx.pth文件放在特定位置，则可以让python在加载模块时，读取xxx.pth中指定的路径，这个特定路径一般是site-packages目录。

- 特定路径查看方法：`import site  site.getsitepackages()`

- 加特定路径的方式： `site.addsitedir('/some/dir/you/want/on/the/path')`

  一般在某python启动时执行该语句，该目录中可包含被引用的模块或pth文件。



### 模块和模块包

#### 模块

相当与引用其他.py文件，类似于java中的引入包。
`import 文件名`
使用其他文件中的对象：`文件名(模块).对象`
其他引入方式：

```
import a as b             # 引入模块a，并将模块a重命名为b
from a import function1   # 从模块a中引入function1对象。调用a中对象时，我们不用再说明模块，即直接使用function1，而不是a.function1。
from a import *           # 从模块a中引入所有对象。调用a中对象时，我们不用再说明模块，即直接使用对象，而不是a.对象。

```

#### 模块包

可以将功能相似的模块放在同一个文件夹（比如说this_dir）中，构成一个模块包。通过

`import this_dir.module`
引入this_dir文件夹中的module模块。

该文件夹中必须包含一个 `__init__.py` 的文件，提醒Python，该文件夹为一个模块包。__init__.py 可以是一个空文件。

#### 导入

**导入的包要先执行其中 的语句，无论是from X import XX,  还是直接import X**



#### `__init__.py` 

__init__.py 文件的作用是将文件夹变为一个Python模块,Python 中的每个模块的包中，都有__init__.py 文件。

通常__init__.py 文件为空，但是我们还可以为它增加其他的功能。我们在导入一个包时，实际上是导入了它的__init__.py文件。这样我们可以在__init__.py文件中批量导入我们所需要的模块，而不再需要一个一个的导入。

```python
# package
# __init__.py
import re
import urllib
import sys
import os

# a.py
import package 
print(package.re, package.urllib, package.sys, package.os)
```

注意这里访问__init__.py文件中的引用文件，需要加上包名。

__init__.py中还有一个重要的变量，__all__, 它用来将模块全部导入。

```
# __init__.py
__all__ = ['os', 'sys', 're', 'urllib']

# a.py
from package import *
```

这时就会把注册在__init__.py文件中__all__列表中的模块和包导入到当前文件中来。



#### 导入上级模块

```python
import sys
sys.path.append("..")
# 现在直接可以导入上级的包了
```

#### 查看导入包的路径

eg： 查看pymongo包的路径

```python
>>>import pymongo
>>>pymongo.__file__
```

#### 导入其他目录的包

```python
import sys
sys.path.insert(0, '/path/to/application/app/folder')

import file
```



#### 导入具体文件的函数

Python2：

```
/home/a.py:
def test():
	print 'i am test'

python:
>>> import imp
>>> s=imp.load_source('test', '/home/a.py')
>>> s
<module 'test' from '/home/a.py'>
>>> s.__dict__.get('test')
<function test at 0x7f865d9ae0c8>
>>> s.__dict__.get('test')()
i am test
>>> 
```

python3+:

https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path