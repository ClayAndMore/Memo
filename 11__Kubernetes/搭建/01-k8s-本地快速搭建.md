---

title: "01-k8s-æœ¬åœ°å¿«é€Ÿæ­å»º.md"
date: 2020-04-07 08:49:48 +0800
lastmod: 2020-04-07 08:49:48 +0800
draft: false
tags: ["k8séƒ¨ç½²"]
categories: ["k8s"]
author: "Claymore"

---



### Kind

Kindï¼ˆKubernetes in Dockerï¼‰æ˜¯ä¸ºäº†èƒ½æä¾›æ›´åŠ ç®€å•ï¼Œé«˜æ•ˆçš„æ–¹å¼æ¥å¯åŠ¨ K8S é›†ç¾¤

https://github.com/kubernetes-sigs/kind/releases/tag/0.1.0

ä¸‹è½½kind-linux-amd64åˆ°æˆ‘çš„ubuntu,

ä¸‹å¥½åï¼Œæ·»åŠ æ‰§è¡Œæƒé™å¹¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

`chmod +x kind-linux-amd64`

`ln -s /root/k8s/kind-linux-amd64 /usr/bin/kind`

åˆ›å»º`kind-config.yaml` :

```yaml
apiVersion: kind.sigs.k8s.io/v1alpha1
kind: Config

kubeadmConfigPatches:
- |
  apiVersion: kubeadm.k8s.io/v1alpha3
  kind: InitConfiguration
  nodeRegistration:
  kubeletExtraArgs:
    pod-infra-container-image: registry.aliyuncs.com/google_containers/pause-amd64:3.1
- |
  apiVersion: kubeadm.k8s.io/v1alpha3
  kind: ClusterConfiguration
  imageRepository: registry.aliyuncs.com/google_containers
  kubernetesVersion: v1.12.2
  networking:
    serviceSubnet: 10.0.0.0/16
```

æ­¤æ—¶kindå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒã€‚

ç„¶åæ‰§è¡Œï¼š

`kind create cluster --image kindest/node:v1.12.2 --config kind-config.yaml --name moelove                  `

ä¼šç­‰å¾…ä¸‹è½½ï¼š

```
Creating cluster 'kind-moelove' ...
 âœ“ Ensuring node image (kindest/node:v1.12.2) ğŸ–¼
 âœ“ [control-plane] Creating node container ğŸ“¦
 âœ“ [control-plane] Fixing mounts ğŸ—»
 âœ“ [control-plane] Starting systemd ğŸ–¥
 âœ“ [control-plane] Waiting for docker to be ready ğŸ‹
 âœ“ [control-plane] Pre-loading images ğŸ‹
 âœ“ [control-plane] Creating the kubeadm config file â›µ
 âœ“ [control-plane] Starting Kubernetes (this may take a minute) â˜¸
Cluster creation complete. You can now use the cluster with:
export KUBECONFIG="$(kind get kubeconfig-path --name="moelove")"
kubectl cluster-info
```

æŒ‰ç…§æç¤ºï¼Œæˆ‘ä»¬æ‰§è¡Œï¼š

`export KUBECONFIG="$(kind get kubeconfig-path --name="moelove")"`

æ¥ä¸‹æ¥ æˆ‘ä»¬è¦ä¸‹è½½Kubectl



### Kubectl

**ç”±äº API ç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜ï¼Œå°½é‡ä¿æŒ `kubectl` ç‰ˆæœ¬ä¸ K8S é›†ç¾¤ç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œæˆ–ç‰ˆæœ¬ç›¸å·®åœ¨åœ¨ä¸€ä¸ªå°ç‰ˆæœ¬å†…ã€‚**